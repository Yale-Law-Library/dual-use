{"ast":null,"code":"var _jsxFileName = \"/Users/parkerkaufmann/Code/ylj/src/LineChart.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport styled from 'styled-components';\nimport data from './mosul_targets_by_quarter.json';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChartContainer = styled.div`\n  width: 100%;\n  height: 600px;\n  font-family: 'Georgia', serif;\n  color: #333;\n`;\n_c = ChartContainer;\nconst Legend = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 1rem;\n  margin-bottom: 1rem;\n  font-size: 14px;\n`;\n_c2 = Legend;\nconst LegendItem = styled.div`\n  display: flex;\n  align-items: center;\n\n  &::before {\n    content: '';\n    display: inline-block;\n    width: 14px;\n    height: 14px;\n    margin-right: 6px;\n    background-color: ${props => props.color || '#000'};\n    opacity: 0.3;\n  }\n`;\n_c3 = LegendItem;\nexport default function LineChart() {\n  _s();\n  const svgRef = useRef();\n  useEffect(() => {\n    const svg = d3.select(svgRef.current);\n    svg.selectAll('*').remove();\n    const margin = {\n      top: 20,\n      right: 20,\n      bottom: 40,\n      left: 60\n    };\n    const width = 900 - margin.left - margin.right;\n    const height = 500 - margin.top - margin.bottom;\n    const g = svg.attr('width', width + margin.left + margin.right).attr('height', height + margin.top + margin.bottom).append('g').attr('transform', `translate(${margin.left},${margin.top})`);\n    const quarters = data.map(d => d.quarter);\n    const categories = Array.from(new Set(data.flatMap(d => d.categories.map(c => c.name))));\n    const stackedData = d3.stack().keys(categories).value((d, key) => {\n      const found = d.categories.find(c => c.name === key);\n      return found ? found.count : 0;\n    })(data);\n    const xScale = d3.scalePoint().domain(quarters).range([0, width]);\n    const yMax = d3.max(stackedData[stackedData.length - 1], d => d[1]);\n    const yScale = d3.scaleLinear().domain([0, yMax]).range([height, 0]);\n    const color = d3.scaleOrdinal().domain(categories).range(d3.schemeCategory10);\n    g.append('g').call(d3.axisLeft(yScale));\n    g.append('g').attr('transform', `translate(0,${height})`).call(d3.axisBottom(xScale)).selectAll('text').attr('transform', 'rotate(-45)').style('text-anchor', 'end');\n    g.selectAll('.layer').data(stackedData).enter().append('path').attr('fill', d => color(d.key)).attr('opacity', 0.3).attr('d', d3.area().x((d, i) => xScale(data[i].quarter)).y0(d => yScale(d[0])).y1(d => yScale(d[1])));\n  }, []);\n  return /*#__PURE__*/_jsxDEV(ChartContainer, {\n    children: [/*#__PURE__*/_jsxDEV(Legend, {\n      children: Array.from(new Set(data.flatMap(d => d.categories.map(c => c.name)))).map(name => /*#__PURE__*/_jsxDEV(LegendItem, {\n        color: d3.schemeCategory10[categories.indexOf(name) % 10],\n        children: name\n      }, name, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: svgRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 5\n  }, this);\n}\n_s(LineChart, \"89Ty783ABEwsfMbSOeu9vscWF34=\");\n_c4 = LineChart;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"ChartContainer\");\n$RefreshReg$(_c2, \"Legend\");\n$RefreshReg$(_c3, \"LegendItem\");\n$RefreshReg$(_c4, \"LineChart\");","map":{"version":3,"names":["React","useEffect","useRef","d3","styled","data","jsxDEV","_jsxDEV","ChartContainer","div","_c","Legend","_c2","LegendItem","props","color","_c3","LineChart","_s","svgRef","svg","select","current","selectAll","remove","margin","top","right","bottom","left","width","height","g","attr","append","quarters","map","d","quarter","categories","Array","from","Set","flatMap","c","name","stackedData","stack","keys","value","key","found","find","count","xScale","scalePoint","domain","range","yMax","max","length","yScale","scaleLinear","scaleOrdinal","schemeCategory10","call","axisLeft","axisBottom","style","enter","area","x","i","y0","y1","children","indexOf","fileName","_jsxFileName","lineNumber","columnNumber","ref","_c4","$RefreshReg$"],"sources":["/Users/parkerkaufmann/Code/ylj/src/LineChart.jsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport styled from 'styled-components';\nimport data from './mosul_targets_by_quarter.json';\n\nconst ChartContainer = styled.div`\n  width: 100%;\n  height: 600px;\n  font-family: 'Georgia', serif;\n  color: #333;\n`;\n\nconst Legend = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 1rem;\n  margin-bottom: 1rem;\n  font-size: 14px;\n`;\n\nconst LegendItem = styled.div`\n  display: flex;\n  align-items: center;\n\n  &::before {\n    content: '';\n    display: inline-block;\n    width: 14px;\n    height: 14px;\n    margin-right: 6px;\n    background-color: ${(props) => props.color || '#000'};\n    opacity: 0.3;\n  }\n`;\n\nexport default function LineChart() {\n  const svgRef = useRef();\n\n  useEffect(() => {\n    const svg = d3.select(svgRef.current);\n    svg.selectAll('*').remove();\n\n    const margin = { top: 20, right: 20, bottom: 40, left: 60 };\n    const width = 900 - margin.left - margin.right;\n    const height = 500 - margin.top - margin.bottom;\n\n    const g = svg\n      .attr('width', width + margin.left + margin.right)\n      .attr('height', height + margin.top + margin.bottom)\n      .append('g')\n      .attr('transform', `translate(${margin.left},${margin.top})`);\n\n    const quarters = data.map((d) => d.quarter);\n    const categories = Array.from(new Set(data.flatMap((d) => d.categories.map((c) => c.name))));\n\n    const stackedData = d3.stack()\n      .keys(categories)\n      .value((d, key) => {\n        const found = d.categories.find((c) => c.name === key);\n        return found ? found.count : 0;\n      })(data);\n\n    const xScale = d3.scalePoint()\n      .domain(quarters)\n      .range([0, width]);\n\n    const yMax = d3.max(stackedData[stackedData.length - 1], (d) => d[1]);\n\n    const yScale = d3.scaleLinear()\n      .domain([0, yMax])\n      .range([height, 0]);\n\n    const color = d3.scaleOrdinal()\n      .domain(categories)\n      .range(d3.schemeCategory10);\n\n    g.append('g')\n      .call(d3.axisLeft(yScale));\n\n    g.append('g')\n      .attr('transform', `translate(0,${height})`)\n      .call(d3.axisBottom(xScale))\n      .selectAll('text')\n      .attr('transform', 'rotate(-45)')\n      .style('text-anchor', 'end');\n\n    g.selectAll('.layer')\n      .data(stackedData)\n      .enter()\n      .append('path')\n      .attr('fill', (d) => color(d.key))\n      .attr('opacity', 0.3)\n      .attr('d', d3.area()\n        .x((d, i) => xScale(data[i].quarter))\n        .y0((d) => yScale(d[0]))\n        .y1((d) => yScale(d[1])));\n  }, []);\n\n  return (\n    <ChartContainer>\n      <Legend>\n        {Array.from(new Set(data.flatMap(d => d.categories.map(c => c.name)))).map((name) => (\n          <LegendItem key={name} color={d3.schemeCategory10[categories.indexOf(name) % 10]}>\n            {name}\n          </LegendItem>\n        ))}\n      </Legend>\n      <svg ref={svgRef}></svg>\n    </ChartContainer>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}